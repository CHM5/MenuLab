<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Men√∫ - MenuLab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="https://res.cloudinary.com/drxznqm61/image/upload/v1758652390/The_Pent_2_a8vhtp.jpg" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://fonts.googleapis.com/css2?family=Almendra+Display&family=Amatic+SC:wght@400;700&family=Anton&family=Caveat:wght@400;700&family=Codystar:wght@300;400&family=Cormorant+Garamond:wght@400;700&family=Coral+Pixels&family=Ewert&family=Indie+Flower&family=Merriweather:wght@400;700&family=Milonga&family=Monoton&family=Montserrat:wght@400;700&family=Oswald:wght@400;700&family=Pacifico&family=Playfair+Display:wght@400;700&family=Quicksand:wght@400;700&family=Ranchers:wght@400;700&family=Rubik+Wet+Paint&family=Sora:wght@400;700&family=Source+Code+Pro:wght@400;700&family=Tangerine:wght@400;700&family=Vast+Shadow&display=swap" rel="stylesheet">

<style>
  :root {
    --color-nombre-resto: #000;
    --color-nombre-slogan: #000;
    --color-categoria: #000;
    --color-subcategoria: #000;
    --color-plato: #000;
    --color-descripcion: #555;
    --color-precio: #000;
    --color-info-resto: #000;
    --color-bg: #fff;

    --font-nombre-resto: 'Lato', sans-serif;
    --font-nombre-slogan: 'Lato', sans-serif;
    --font-categoria: 'Lato', sans-serif;
    --font-subcategoria: 'Lato', sans-serif;
    --font-plato: 'Lato', sans-serif;
    --font-descripcion: 'Lato', sans-serif;
    --font-precio: 'Lato', sans-serif;
    --font-info-resto: 'Lato', sans-serif;

    --bg-opacity: 0.15;
    --bg-size-scale: 100%;
    --menu-columns: 2;

    --logo-size: 100px;
    --size-nombre-resto: 2rem;
    --size-nombre-slogan: 1rem;
    --size-categoria: 1.5rem;
    --size-subcategoria: 1rem;
    --size-plato: 0.95rem;
    --size-descripcion: 0.85rem;
    --size-precio: 0.9rem;
    --size-info-resto: 0.8rem;
    --tracking: 0px;
  }

  body {
    font-family: 'Lato', sans-serif;
    margin: 0 auto;
    padding: 20px;
    column-count: var(--menu-columns);
    column-gap: 20px;
    background: var(--color-bg);
    letter-spacing: var(--tracking);
    color: var(--color-plato);
    transition: all 0.25s ease;
  }

  /* === FONDO === */
  .print-background {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url("https://res.cloudinary.com/drxznqm61/image/upload/v1759872998/drilldown-removebg-preview_zczol3.png")
                no-repeat center center;
    background-size: var(--bg-size-scale);
    opacity: var(--bg-opacity);
    z-index: -1;
    pointer-events: none;
  }

  /* === ENCABEZADO === */
  .resto-header {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
    text-align: center;
    column-span: all;
  }

  .resto-header img {
    width: var(--logo-size);
    height: var(--logo-size);
    border-radius: 50%;
    object-fit: cover;
  }

  .resto-header h1 {
    font-family: var(--font-nombre-resto);
    font-size: var(--size-nombre-resto);
    margin: 0;
    color: var(--color-nombre-resto);
  }

  .resto-slogan {
    font-family: var(--font-nombre-slogan);
    font-size: var(--size-nombre-slogan);
    font-style: italic;
    font-weight: 400;
    margin: 0.2rem 0 0;
    color: var(--color-nombre-slogan);
  }

  #menuTable h3 {
    font-family: var(--font-subcategoria);
    font-size: var(--size-subcategoria);
    color: var(--color-subcategoria);
    font-style: italic;
    margin: 0.4rem 0;
    border-bottom: 1px solid rgba(0,0,0,0.08);
    page-break-after: avoid;
    break-after: avoid;
  }

  /* === CATEGOR√çAS Y PLATOS === */
  h2 {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    font-family: var(--font-categoria);
    font-size: var(--size-categoria);
    color: var(--color-categoria);
    font-weight: bold;
    text-align: center;
    margin: 1.2rem 0 0.8rem;
    column-span: all;
  }

  h2::before, h2::after {
    content: var(--firulete, "‚ú¶ ‚ú¶ ‚ú¶");
    color: var(--color-categoria);
    opacity: 0.4;
    font-size: 1rem;
  }

  .menu-item {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    padding: 0.35rem 0;
    break-inside: avoid-column;
    page-break-inside: avoid;
    transition: background 0.2s ease;
  }

  .menu-item:hover {
    background: rgba(0,0,0,0.03);
  }

  .menu-plate {
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .menu-plate h4 {
    font-family: var(--font-plato);
    font-size: var(--size-plato);
    color: var(--color-plato);
    margin: 0;
    font-weight: 700;
  }

  .menu-description {
    font-family: var(--font-descripcion);
    font-size: var(--size-descripcion);
    color: var(--color-descripcion);
    margin: 0.2rem 0 0;
  }

  .menu-price {
    font-family: var(--font-precio);
    font-size: var(--size-precio);
    color: var(--color-precio);
    font-weight: bold;
    margin-left: 12px;
    white-space: nowrap;
  }

  .menu-item.destacado {
    background: rgba(255, 215, 0, 0.12);
    border-left: 4px solid #c6a400;
    border-radius: 6px;
    padding: 0.4rem 0.6rem;
  }

  /* === FOOTER === */
  .footer {
    font-family: var(--font-info-resto);
    font-size: var(--size-info-resto);
    color: var(--color-info-resto);
    text-align: center;
    border-top: 1px solid #ddd;
    margin-top: 2rem;
    padding: 10px 0;
    column-span: all;
  }

  /* === RESPONSIVE === */
  @media (max-width: 768px) {
    body {
      column-count: 1 !important;
      padding: 10px;
    }
    .resto-header {
      flex-direction: column;
      gap: 0.5rem;
    }
  }

  /* === MODO IMPRESI√ìN === */
  @media print {
    @page {
      size: A4;
      margin: 10mm 8mm 10mm 8mm;
    }

    body {
      background: var(--color-bg) !important;
      column-count: var(--menu-columns);
      column-gap: 15px;
    }

    .print-background {
      opacity: var(--bg-opacity) !important;
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
    }

    .footer {
      position: fixed;
      bottom: 0;
      width: 100%;
      background: var(--color-bg);
      border-top: 1px solid #ccc;
      color: var(--color-info-resto);
      padding: 6px 0;
    }

    .menu-item, .resto-header {
      break-inside: avoid;
      page-break-inside: avoid;
    }
  }

  
</style>

</head>
<body>
  <!-- üåÑ Fondo -->
  <div class="print-background"></div>

  <!-- üè™ Encabezado -->
  <div class="resto-header">
    <img src="https://res.cloudinary.com/drxznqm61/image/upload/v1758652390/The_Pent_2_a8vhtp.jpg" alt="Logo" id="logo-resto" style="width:100px;height:100px;border-radius:50%;object-fit:cover;">
    <h1 id="nombre-resto">Caf√© Central</h1>
    <h3 id="subtitulo-resto" class="resto-slogan">Todo rico, todo el d√≠a</h3>
  </div>

  <!-- üìú Contenido del men√∫ -->
<div id="menuTable"></div>

<script>
/* === Datos base de ejemplo === */
const allRows = [
    ["Cafeter√≠a", "Cl√°sicos", "Caf√© en Jarrito", "Caf√© espresso", "$1200"],
    ["Cafeter√≠a", "Cl√°sicos", "Caf√© con Leche", "Caf√© espresso con leche caliente.", "$1300"],
    ["Cafeter√≠a", "Cl√°sicos", "Caf√© Doble", "Caf√© filtrado suave, taza grande.", "$1100", "destacado"],
    ["Cafeter√≠a", "Especiales", "Flat White", "Espresso doble con leche microespumada.", "$1500"],
    ["Cafeter√≠a", "Especiales", "Latte Vainilla", "Caf√© con leche y sirope de vainilla.", "$1600"],
    ["Cafeter√≠a", "Especiales", "Cappuccino", "Espresso, leche y espuma, decorado con cacao.", "$1400"],
    ["Cafeter√≠a", "Fr√≠os", "Cold Brew", "Caf√© infusionado en fr√≠o por 12 horas.", "$1700"],
    ["Cafeter√≠a", "Fr√≠os", "Iced Latte", "Caf√© espresso, leche y hielo.", "$1600", "celiaco"],
    
    ["Pasteler√≠a", "Tortas", "Cheesecake", "Porci√≥n de cheesecake casero.", "$2200"],
    ["Pasteler√≠a", "Tortas", "Brownie", "Brownie de chocolate con nuez y bocha de helado de lim√≥n.", "$1800"],
    ["Pasteler√≠a", "Tortas", "Carrot Cake", "Bizcocho h√∫medo de zanahoria y especias.", "$2100"],
    ["Pasteler√≠a", "Tortas", "Lemon Pie", "Tarta de lim√≥n con merengue italiano.", "$2000", "destacado"],
    
    ["Pasteler√≠a", "Cookies", "Cookie Chips", "Galleta artesanal con chips de chocolate.", "$900"],
    ["Pasteler√≠a", "Cookies", "Cookie Red Velvet", "Galleta roja con chocolate blanco.", "$950"],
    
    ["Sandwiches", "", "Tostado de Jam√≥n y Queso", "Pan casero, jam√≥n cocido y queso.", "$2000"],
    ["Sandwiches", "", "Bagel Capresse", "Bagel artesanal, tomate, mozzarella y albahaca.", "$2300", "vegetariano"],
    ["Sandwiches", "", "Croissant Veggie", "Croissant con vegetales grillados y queso.", "$2200", "vegano"],
    
    ["Desayunos", "", "Combo Central", "Caf√© + jugo + tostadas + mermelada y manteca.", "$2500"],
    ["Bebidas", "Jugos Naturales", "Jugo de Naranja Natural", "Jugo exprimido al momento.", "$800"],
    ["Bebidas", "Jugos Naturales", "Jugo de Manzana y Zanahoria", "Fresco y revitalizante.", "$900"],
    
    ["Saludables", "Yogur", "Yogur Natural", "Limonada casera con menta y albahaca.", "$850"],
    ["Saludables", "Yogur", "Yogur con Granola y Frutas", "Yogur natural con granola y frutas de estaci√≥n", "$2000", "celiaco"],
    
    ["Desayunos", "", "Granola Bowl", "Yogur natural, granola casera y frutas frescas.", "$1800"],
    ["Desayunos", "", "Tostadas Avocado", "Pan integral, palta, tomate y semillas.", "$2100", "vegano"],
    
    ["Cafeter√≠a", "Especiales", "Mocha Latte", "Caf√© espresso con leche vaporizada y chocolate.", "$1700"],
    ["Cafeter√≠a", "Especiales", "Caramel Macchiato", "Espresso con leche, espuma y toque de caramelo.", "$1750"],
    
    ["Cafeter√≠a", "Fr√≠os", "Espresso Tonic", "Espresso servido sobre t√≥nica y hielo.", "$1600"],
    ["Cafeter√≠a", "Fr√≠os", "Affogato", "Helado de vainilla ba√±ado con espresso caliente.", "$1900", "celiaco"],
    ["Cafeter√≠a", "Fr√≠os", "Iced Matcha Latte", "T√© matcha japon√©s con leche vegetal y hielo.", "$1800", "vegano"],
    
    ["Cafeter√≠a", "Fr√≠os", "Frappuccino Oreo", "Frapp√© de caf√© con galletas Oreo y crema.", "$2000"],
    ["Cafeter√≠a", "Fr√≠os", "Limonada Menta & Jengibre", "Refrescante, casera y natural.", "$1500"],
    ["Cafeter√≠a", "Fr√≠os", "Smoothie Frutos Rojos", "Batido con yogur natural y frutas del bosque.", "$1900", "celiaco"],
    
    ["Pasteler√≠a", "", "Muffin de Banana Vegano", "Sin l√°cteos, sin huevo, con nueces y banana.", "$1300", "vegano"],
    ["Pasteler√≠a", "Reposter√≠a", "Cinnamon Roll", "Roll de canela con glaseado de vainilla.", "$1600"],
    ["Pasteler√≠a", "Reposter√≠a", "Mini Tarta de Manzana", "Tarta individual con manzana caramelizada.", "$1700"],
    
    ["Sandwiches", "", "Focaccia de Pollo", "Pan focaccia, pollo grillado, r√∫cula y pesto.", "$2400", "destacado"],
    ["Desayunos", "", "Huevos Benedicto", "Pan de campo, jam√≥n cocido, huevo poch√© y salsa holandesa.", "$2600"],
    ["Desayunos", "", "Brunch Central", "Huevos, tostadas, caf√©, jugo y mini torta.", "$3200", "celiaco", "destacado"],
    
    ["Pasteler√≠a", "Sin Gluten", "Brownie sin TACC", "Brownie h√∫medo con almendras sin gluten.", "$1400", "celiaco", "destacado"],
    ["Sandwiches", "", "Tostado Vegano", "Pan integral, hummus, palta y tomate seco.", "$2100", "vegano"],
    ["Sandwiches", "", "Croissant Capresse", "Croissant con tomate, albahaca y mozzarella.", "$2300", "vegetariano"]
  ];


/* === Render din√°mico del men√∫ === */
function renderMenu(rows) {
  const container = document.getElementById("menuTable");
  container.innerHTML = "";
  const grouped = {};

  rows.forEach(([cat, subcat, nombre, desc, precio, ...extras]) => {
    if (!cat) return;
    if (!grouped[cat]) grouped[cat] = {};
    const sub = subcat || "-";
    if (!grouped[cat][sub]) grouped[cat][sub] = [];
    grouped[cat][sub].push({ nombre, desc, precio, extras });
  });

  Object.entries(grouped).forEach(([cat, subs]) => {
    const catDiv = document.createElement("div");
    const catTitle = document.createElement("h2");
    catTitle.textContent = cat;
    catDiv.appendChild(catTitle);

    Object.entries(subs).forEach(([sub, items]) => {
      if (sub && sub !== "-") {
        const subTitle = document.createElement("h3");
        subTitle.textContent = sub;
        catDiv.appendChild(subTitle);
      }
      items.forEach(item => {
        const div = document.createElement("div");
        div.className = "menu-item";
        if (item.extras.includes("destacado")) div.classList.add("destacado");
        div.innerHTML = `
          <div class="menu-plate">
            <h4>${item.nombre}</h4>
            <p class="menu-description">${item.desc || ""}</p>
          </div>
          <span class="menu-price">${item.precio}</span>
        `;
        catDiv.appendChild(div);
      });
    });
    container.appendChild(catDiv);
  });
}

renderMenu(allRows);

/* === Listener global para comunicaci√≥n con editor === */
window.addEventListener("message", event => {
  const { type, data } = event.data || {};
  if (!type) return;

  switch (type) {

    /* === Mensaje inicial === */
    case "init":
      window.parent.postMessage({ type: "ready" }, "*");
      break;

    /* === CAMBIO DE FUENTES === */
    case "font-section": {
      const { section, font } = data;
      const families = {
        "tangerine": "'Tangerine', cursive",
        "cormorant-garamond": "'Cormorant Garamond', serif",
        "playfair": "'Playfair Display', serif",
        "merriweather": "'Merriweather', serif",
        "quicksand": "'Quicksand', sans-serif",
        "almendra": "'Almendra Display', serif",
        "milonga": "'Milonga', serif",
        "vast": "'Vast Shadow', serif",
        "anton": "'Anton', sans-serif",
        "rubik": "'Rubik Wet Paint', system-ui",
        "caveat": "'Caveat', cursive",
        "indie-flower": "'Indie Flower', cursive",
        "amatic-sc": "'Amatic SC', cursive",
        "sora": "'Sora', sans-serif",
        "pacifico": "'Pacifico', cursive",
        "montserrat": "'Montserrat', sans-serif",
        "codystar": "'Codystar', sans-serif",
        "source-code": "'Source Code Pro', monospace",
        "monoton": "'Monoton', sans-serif",
        "oswald": "'Oswald', sans-serif",
        "coral": "'Coral Pixels', serif",
        "ranchers": "'Ranchers', sans-serif",
        "ewert": "'Ewert', serif"
      };
      const family = families[font] || "Lato, sans-serif";

      const map = {
        "nombre-resto": "#nombre-resto",
        "nombre-slogan": "#subtitulo-resto",
        "categoria": "h2",
        "subcategoria": "#menuTable h3",
        "plato": ".menu-plate h4",
        "descripcion": ".menu-description",
        "precio": ".menu-price",
        "info-resto": ".footer"
      };

      const selector = map[section];
      if (!selector) return;
      document.querySelectorAll(selector).forEach(el => el.style.fontFamily = family);
      break;
    }

    /* === CAMBIO DE TAMA√ëO === */
    case "size-section": {
      const { section, value } = data;
      const rem = `${value}rem`;
      const map = {
        "nombre-resto": "#nombre-resto",
        "nombre-slogan": "#subtitulo-resto",
        "categoria": "h2",
        "subcategoria": "#menuTable h3",
        "plato": ".menu-plate h4",
        "descripcion": ".menu-description",
        "precio": ".menu-price",
        "info-resto": ".footer"
      };
      const selector = map[section];
      if (!selector) return;
      document.querySelectorAll(selector).forEach(el => el.style.fontSize = rem);
      break;
    }

    /* === CAMBIO DE COLOR === */
    case "color-section": {
      const { section, value } = data;
      const map = {
        "nombre-resto": "#nombre-resto",
        "nombre-slogan": "#subtitulo-resto",
        "categoria": "h2",
        "subcategoria": "#menuTable h3",
        "plato": ".menu-plate h4",
        "descripcion": ".menu-description",
        "precio": ".menu-price",
        "info-resto": ".footer"
      };
      const selector = map[section];
      if (!selector) return;
      document.querySelectorAll(selector).forEach(el => el.style.color = value);
      break;
    }

    /* === FIRULETE === */
    case "firulete":
      document.documentElement.style.setProperty("--firulete", `"${data}"`);
      break;

    /* === COLUMNAS === */
    case "columns":
      document.documentElement.style.setProperty("--menu-columns", data);
      document.body.style.columnCount = data;
      break;

    /* === OPACIDAD FONDO === */
    case "opacity":
      document.documentElement.style.setProperty("--bg-opacity", data);
      break;

    /* === PRESETS === */
    case "preset": {
      const preset = parseInt(data);
      const presets = {
        1: { bg: "#fff8f0", colorCategoria: "#4a2c00", fontCategoria: "'Playfair Display', serif", firulete: "üç∑ ‚ú® üç∑" },
        2: { bg: "#faf5ef", colorCategoria: "#3b2f2f", fontCategoria: "'Cormorant Garamond', serif", firulete: "‚öú ‚öú ‚öú" },
        6: { bg: "#ffffff", colorCategoria: "#5b4b3a", fontCategoria: "'Pacifico', cursive", firulete: "‚òï ‚ú® ‚òï" },
        11:{ bg: "#f8f8f8", colorCategoria: "#1a1a1a", fontCategoria: "'Oswald', sans-serif", firulete: "üç∫ üç∑ üç∫" },
        21:{ bg: "#f5fff5", colorCategoria: "#2e7d32", fontCategoria: "'Quicksand', sans-serif", firulete: "üåø ‚úø üåø" },
        26:{ bg: "#fff9f5", colorCategoria: "#a55200", fontCategoria: "'Merriweather', serif", firulete: "üçù üç∑ üçù" },
      };
      const p = presets[preset];
      if (!p) return;
      document.body.style.background = p.bg;
      document.documentElement.style.setProperty("--color-categoria", p.colorCategoria);
      document.querySelectorAll("h2").forEach(el => {
        el.style.color = p.colorCategoria;
        el.style.fontFamily = p.fontCategoria;
      });
      document.documentElement.style.setProperty("--firulete", `"${p.firulete}"`);
      break;
    }
  }
});

</script>
</body>
</html>
