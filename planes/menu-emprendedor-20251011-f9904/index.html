<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Men√∫ Online</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <link rel="icon" type="image/png" href="../../MLfavicon.png" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
:root {
  --nombre-restaurante: "Caf√© Central";
  --subtitulo-restaurante: "Todo rico, todo el d√≠a";
  --direccion-restaurante: "Av. Corrientes 123";
  --horario-restaurante: "Martes a Domingos de 8 a 20hs";
  --telefono-restaurante: "+54 11 1234-5678";
  --color-nombre-resto: #000;
  --color-nombre-slogan: #000;
  --color-categoria: #000;
  --color-subcategoria: #000;
  --color-plato: #000;
  --color-descripcion: #555;
  --color-precio: #000;
  --color-info-resto: #000;
  --color-bg: #fff;
  --bg-opacity: 0.2;
  --menu-font-size: 1rem;
}

/* --- Reset base --- */
* {
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

body {
  font-family: 'Poppins', Arial, sans-serif;
  background: var(--color-bg);
  color: #222;
  margin: 0 auto;
  padding: 80px 12px 80px;
  column-count: 2;
  column-gap: 24px;
  transition: all 0.3s ease;
  overflow-x: hidden;
}

h1, h2, h3, h4 {
  margin: 0;
}

#menuTable, .resto-header, .footer {
  font-size: var(--menu-font-size);
}

/* --- Titulares --- */
h2 { 
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  font-size: clamp(1.2rem, 4vw, 1.5rem);
  color: var(--color-categoria);
  font-weight: 700;
  text-align: center;
  margin: 1.2rem 0 0.8rem;
}

h2::before,
h2::after {
  content: var(--firulete, "‚ú¶ ‚ú¶ ‚ú¶");
  color: var(--color-categoria);
  font-size: 1rem;
  opacity: 0.4;
  flex-shrink: 0;
}

/* --- Subcategor√≠as --- */
h3 {
  font-size: clamp(1rem, 3vw, 1.2rem);
  font-style: italic;
  color: var(--color-subcategoria);
  margin: 0.3rem 0 0.5rem;
}

/* --- √çtems de men√∫ --- */
.menu-item {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: 0.5rem 0;
  break-inside: avoid-column;
  border-bottom: 1px solid #eee;
}

.menu-plate {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.menu-plate h4 {
  font-size: calc(0.95 * var(--menu-font-size));
  font-weight: 600;
  color: var(--color-plato);
  margin: 0;
}

.menu-description {
  font-size: calc(0.8 * var(--menu-font-size));
  color: var(--color-descripcion);
  margin-top: 0.15rem;
}

.menu-price {
  font-weight: bold;
  font-size: calc(0.9 * var(--menu-font-size));
  color: var(--color-precio);
  margin-left: 10px;
  white-space: nowrap;
}

/* --- Header del restaurante --- */
.resto-header {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
  break-inside: avoid;
}

.resto-header img {
  width: 90px;
  height: 90px;
  border-radius: 50%;
  object-fit: cover;
}

.resto-text {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

.resto-header h1 {
  font-size: clamp(1.4rem, 5vw, 2rem);
  color: var(--color-nombre-resto);
}

.resto-header h3 {
  font-size: clamp(1rem, 4vw, 1.3rem);
  color: var(--color-nombre-slogan);
  font-style: italic;
}

/* --- Footer --- */
.footer {
  column-span: all;
  text-align: center;
  font-size: 0.85rem;
  color: var(--color-info-resto);
  border-top: 1px solid #ddd;
  padding: 10px 0;
  background: var(--color-bg);
  position: relative;
  z-index: 10;
}

.footer span {
  margin: 0 6px;
  white-space: nowrap;
}

/* --- Bot√≥n imprimir --- */
#printBtn {
  background: #457B9D;
  color: #fff;
  padding: 10px 18px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 1rem;
  transition: background 0.3s ease;
}

#printBtn:hover {
  background: #1d3557;
}

/* --- Top menu --- */
#topMenu {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background: #fff;
  padding: 10px 15px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  z-index: 1000;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 8px;
}

/* --- Inputs y selectores --- */
#topMenu select,
#topMenu input[type="color"],
#topMenu input[type="range"] {
  border-radius: 6px;
  border: 1px solid #ddd;
  cursor: pointer;
  font-size: 0.9rem;
}

#topMenu select {
  padding: 6px 10px;
}

#topMenu input[type="color"] {
  width: 38px;
  height: 38px;
  border: none;
}

#topMenu input[type="range"] {
  width: 80px;
}

/* --- Mobile optimizaci√≥n --- */
@media (max-width: 991px) {
  body {
    column-count: 1;
    column-gap: 0;
    padding: 70px 14px 60px;
  }

  .menu-item {
    flex-direction: column;
    align-items: flex-start;
  }

  .menu-price {
    margin-top: 4px;
    margin-left: 0;
  }

  .resto-header {
    flex-direction: column;
    text-align: center;
  }

  .resto-header img {
    width: 80px;
    height: 80px;
  }

  #topMenu {
    flex-direction: column;
    align-items: stretch;
    gap: 10px;
    padding: 12px;
  }

  #topMenu select,
  #topMenu input[type="range"],
  #topMenu input[type="color"],
  #printBtn {
    width: 100%;
  }

  .footer {
    font-size: 0.8rem;
    line-height: 1.4;
    padding: 12px;
  }
}

/* --- Muy peque√±as pantallas --- */
@media (max-width: 480px) {
  body {
    padding: 60px 10px 50px;
  }

  h2 {
    font-size: 1.1rem;
  }

  .menu-plate h4 {
    font-size: 1rem;
  }

  .menu-description {
    font-size: 0.85rem;
  }

  .menu-price {
    font-size: 1rem;
  }

  #topMenu {
    padding: 10px;
  }

  #topMenu select {
    font-size: 0.85rem;
  }
}

/* --- Print --- */
@media print {
  #topMenu, #printBtn {
    display: none !important;
  }

  body {
    column-count: 2 !important;
    margin: 0 !important;
    background: var(--color-bg);
  }

  @page {
    size: A4;
    margin: 10mm;
  }

  .footer {
    position: fixed;
    bottom: 0;
  }
}
  </style>
<link href="https://fonts.googleapis.com/css?family=Oswald:400,700|Roboto+Slab:400,700|Pacifico|Lato:400,700|Merriweather:400,700|Montserrat:400,700|Indie+Flower|Playfair+Display:400,700|Source+Code+Pro:400,700&display=swap" rel="stylesheet">  
<link href="https://fonts.googleapis.com/css?family=Oswald:400,700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@400;700&family=Syne:wght@400;700&family=Sora:wght@400;700&family=Staatliches&family=Caveat&family=Yeseva+One&family=Righteous&family=Cormorant+Garamond:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="print-background"></div>
    <div id="topMenu">
      <div class="dropdown">
        <button class="dropbtn">üåà Estilos</button>
        <div class="dropdown-content">
          <label for="presetSelector">Seleccionar estilo</label>
          <select id="presetSelector" style="width:100%;">
            <option value="">Seleccion√° un estilo...</option>
            <option value="1">‚òï Vintage</option>
            <option value="2">üåø Natural Pastel</option>
            <option value="3">üñ§ Minimalista Oscuro</option>
            <option value="4">üíé Luxury Dorado</option>
            <option value="5">üìú Cl√°sico Italiano</option>
            <option value="6">ü©µ Celeste Moderno</option>
            <option value="7">üçÇ Oto√±al Suave</option>
            <option value="8">‚ö° Tech Futurista</option>
            <option value="9">üé® Pop Alegre</option>
            <option value="10">ü§ç Blanco Neutro</option>
          </select>
        </div>
      </div>
      <div class="dropdown">
        <button class="dropbtn">üñãÔ∏è Fuente</button>
        <div class="dropdown-content">
          <label for="fontSelector">Seleccionar fuente</label>
          <select id="fontSelector" style="width:100%;">
            <option value="arial">Arial (Actual)</option>
            <option value="oswald">Condensed Grotesk (Oswald)</option>
            <option value="roboto-slab">Serif Moderna (Roboto Slab)</option>
            <option value="pacifico">Manuscrita Cursiva (Pacifico)</option>
            <option value="lato">Sans Elegante (Lato)</option>
            <option value="merriweather">Serif Cl√°sica (Merriweather)</option>
            <option value="montserrat">Sans Moderna (Montserrat)</option>
            <option value="indie-flower">Manuscrita Casual (Indie Flower)</option>
            <option value="playfair">Serif Fashion (Playfair Display)</option>
            <option value="source-code">Monoespaciada (Source Code Pro)</option>
            <option value="unbounded">Futurista Geom√©trica (Unbounded)</option>
            <option value="syne">Experimental Bold (Syne)</option>
            <option value="sora">Tech Elegante (Sora)</option>
            <option value="staatliches">Bauhaus Brutalista (Staatliches)</option>
            <option value="caveat">Manuscrita Clara (Caveat)</option>
            <option value="yeseva-one">Serif Chic (Yeseva One)</option>
            <option value="righteous">Redondeada Moderna (Righteous)</option>
            <option value="cormorant-garamond">Gourmet Serif (Cormorant Garamond)</option>
          </select>
        </div>
      </div>
      <div>
        <label for="font-size-range">Letra</label>
        <input type="range" id="font-size-range" min="0.7" max="2" step="0.01" value="1" style="width:80px;">
      </div>
      <div class="dropdown">
        <button class="dropbtn">üé® Colores</button>
        <div class="dropdown-content" id="colorMenu">
          <label>Nombre <input type="checkbox" class="color-group"> <input type="color" id="color-nombre-resto"></label>
          <label>Slogan <input type="checkbox" class="color-group"> <input type="color" id="color-nombre-slogan"></label>
          <label>Categoria <input type="checkbox" class="color-group"> <input type="color" id="color-categoria"></label>
          <label>Subcategoria <input type="checkbox" class="color-group"> <input type="color" id="color-subcategoria"></label>
          <label>Plato <input type="checkbox" class="color-group"> <input type="color" id="color-plato"></label>
          <label>Descripci√≥n <input type="checkbox" class="color-group"> <input type="color" id="color-descripcion"></label>
          <label>Precio <input type="checkbox" class="color-group"> <input type="color" id="color-precio"></label>
          <label>Info <input type="checkbox" class="color-group"> <input type="color" id="color-info-resto"></label>
          <label>Fondo <input type="checkbox" class="color-group"> <input type="color" id="color-bg"></label>

          <hr style="margin:8px 0;">
          <label style="display:flex;align-items:center;gap:6px;font-size:0.85rem;">
            <input type="checkbox" id="sameColorMode">
            Aplicar mismo color a los seleccionados
          </label>
          <!-- Cuadradito principal de color -->
          <div id="masterColorContainer" style="display:none;align-items:center;gap:6px;margin-top:6px;">
            <label style="font-size:0.85rem;">Color principal</label>
            <input type="color" id="masterColor" value="#000000" style="width:40px;height:40px;cursor:pointer;border:none;border-radius:4px;">
          </div>
          <small style="display:block;color:#555;font-size:0.75rem;margin-top:4px;">
            (Marc√° varios campos y eleg√≠ un color para aplicarlo a todos)
          </small>
        </div>
      </div>
      <div class="dropdown">
        <button class="dropbtn">‚ú® Firulete</button>
        <div class="dropdown-content">
          <label for="firuleteSelector">Tipo de firulete</label>
          <select id="firuleteSelector" style="width:100%;">
            <option value="">Ninguno</option>
            <option value="‚ú¶ ‚ú¶ ‚ú¶">Brillos ‚ú¶ ‚ú¶ ‚ú¶</option>
            <option value="‚öú ‚öú ‚öú">Cl√°sico ‚öú ‚öú ‚öú</option>
            <option value="‚ùß ‚ùß ‚ùß">Floral ‚ùß ‚ùß ‚ùß</option>
            <option value="‚òï ‚ô° ‚òï">Caf√© ‚òï ‚ô° ‚òï</option>
            <option value="üçÉ ‚úø üçÉ">Natural üçÉ ‚úø üçÉ</option>
            <option value="‚ú§ ‚ú§ ‚ú§">Sello ‚ú§ ‚ú§ ‚ú§</option>
            <option value="‚ãÑ ‚ãÑ ‚ãÑ">Rombo ‚ãÑ ‚ãÑ ‚ãÑ</option>
            <option value="‚ú® üí´ ‚ú®">M√°gico ‚ú® üí´ ‚ú®</option>
          </select>
        </div>
      </div>
      <div>
        <label for="bg-opacity">Logo</label>
        <input type="range" id="bg-opacity" min="0" max="0.5" step="0.01" value="0.2" style="width:80px;">
      </div>
      <button id="printBtn" onclick="window.print()">üñ®Ô∏è Vista Previa</button>
    </div>
    <div class="resto-header">
      <img id="perfil-resto" alt="Logo del restaurante" style="width:100px;height:100px;border-radius:50%;object-fit:cover;" hidden>
      <div class="resto-text">
        <h1 id="nombre-resto"></h1>
        <h3 id="subtitulo-resto"></h3>
      </div>
    </div>

    <div id="menuTable"></div>

    <div class="footer">
      <span><i class="fa-solid fa-map-marker-alt"></i> <span id="direccion-resto"></span></span> |
      <span><i class="fa-solid fa-clock"></i> <span id="horario-resto"></span></span> |
      <span><i class="fa-solid fa-phone"></i> <span id="telefono-resto"></span></span>
    </div>

<script>
  const CSV_URL = "https://docs.google.com/spreadsheets/d/1drRgQYVXeEEMBt0096jSj6zl28UeBKSuEmKZnnLI6XE/gviz/tq?tqx=out:csv&sheet=Menu";
  const FIJOS_URL = "https://docs.google.com/spreadsheets/d/1drRgQYVXeEEMBt0096jSj6zl28UeBKSuEmKZnnLI6XE/gviz/tq?tqx=out:csv&sheet=Datos";
  let allRows = [];

  // === Cargar men√∫ ===
  fetch(CSV_URL)
    .then(r => r.text())
    .then(data => {
      allRows = data.split("\n").slice(1).map(r => r.split(",").map(c => c.replace(/"/g, "")));
      renderMenu(allRows);
    });

  // === Renderizar men√∫ agrupado ===
  function renderMenu(rows) {
    const container = document.getElementById("menuTable");
    container.innerHTML = "";
    const grouped = {};
    rows.forEach(cols => {
      const [cat, sub, name, desc, price, ...flags] = cols.map(c => c.trim());
      if (!cat || !name) return;
      if (!grouped[cat]) grouped[cat] = {};
      const s = sub || "-";
      if (!grouped[cat][s]) grouped[cat][s] = [];
      grouped[cat][s].push({ name, desc, price, flags });
    });
  Object.entries(grouped).forEach(([cat, subs]) => {
    const catWrapper = document.createElement("div");
    const catTitle = document.createElement("h2");
    catTitle.textContent = cat;
    catWrapper.appendChild(catTitle);
    Object.entries(subs).forEach(([sub, items]) => {
      if (sub && sub !== "-") {
        const subTitle = document.createElement("h3");
        subTitle.textContent = sub;
        catWrapper.appendChild(subTitle);
      }
      items.forEach(item => {
        const div = document.createElement("div");
        div.className = "menu-item";
        if (item.flags.includes("destacado")) div.classList.add("destacado");

        const icons = [];
        if (item.flags.includes("celiaco")) {
          icons.push('<img class="icon-diet" src="https://res.cloudinary.com/drxznqm61/image/upload/v1760150815/download_4_yulmty.png" alt="Sin TACC" title="Sin TACC">');
        }
        if (item.flags.includes("vegano")) {
          icons.push('<img class="icon-diet" src="https://res.cloudinary.com/drxznqm61/image/upload/v1760150943/download_5_pupphw.png" alt="Apto Vegano" title="Apto Vegano">');
        }
        const iconsHTML = icons.length ? `<div class="diet-icons">${icons.join("")}</div>` : "";

        div.innerHTML = `
          <div class="menu-plate">
            <h4>
              <span class="diet-icons inline">${iconsHTML}</span>
              ${item.name}
            </h4>
            <p class="menu-description">${item.desc || ""}</p>
          </div>
          <span class="menu-price">${item.price}</span>
        `;
        catWrapper.appendChild(div);
      });
    });
    container.appendChild(catWrapper);
  });
}

fetch(FIJOS_URL)
  .then(r => r.text())
  .then(data => {
    const rows = data.split("\n").map(r => r.split(",").map(c => c.replace(/"/g, "").trim()));

    // ‚öôÔ∏è En tu CSV, la info √∫til est√° en columna B (√≠ndice 1)
    const get = row => (rows[row] && rows[row][1]) ? rows[row][1] : "";

    document.getElementById("nombre-resto").textContent = get(1);   
    document.getElementById("subtitulo-resto").textContent = get(2);
    document.getElementById("direccion-resto").textContent = get(3);
    document.getElementById("horario-resto").textContent = get(4);
    document.getElementById("telefono-resto").textContent = get(5);

    const bg = get(6);   // Fondo
    const logo = get(7); // Logo

    if (bg && bg.toLowerCase() !== "off") {
      const bgDiv = document.querySelector(".print-background");
      bgDiv.style.background = `url('${bg}') no-repeat center center`;
      bgDiv.style.backgroundSize = "100%";
    }

    if (logo && logo.toLowerCase() !== "off") {
      const img = document.getElementById("perfil-resto");
      img.src = logo;
      img.hidden = false;
    }
  });

    document.getElementById('fontSelector').addEventListener('change', function(e) {
      const val = e.target.value;
      if (val === 'arial') {
        document.body.style.fontFamily = 'Arial, sans-serif';
      } else if (val === 'oswald') {
        document.body.style.fontFamily = "'Oswald', Arial, sans-serif";
      } else if (val === 'roboto-slab') {
        document.body.style.fontFamily = "'Roboto Slab', serif";
      } else if (val === 'pacifico') {
        document.body.style.fontFamily = "'Pacifico', cursive";
      } else if (val === 'lato') {
        document.body.style.fontFamily = "'Lato', Arial, sans-serif";
      } else if (val === 'merriweather') {
        document.body.style.fontFamily = "'Merriweather', serif";
      } else if (val === 'montserrat') {
        document.body.style.fontFamily = "'Montserrat', Arial, sans-serif";
      } else if (val === 'indie-flower') {
        document.body.style.fontFamily = "'Indie Flower', cursive";
      } else if (val === 'playfair') {
        document.body.style.fontFamily = "'Playfair Display', serif";
      } else if (val === 'source-code') {
        document.body.style.fontFamily = "'Source Code Pro', monospace";
      } else if (val === 'unbounded') {
        document.body.style.fontFamily = "'Unbounded', sans-serif";
      } else if (val === 'syne') {
        document.body.style.fontFamily = "'Syne', sans-serif";
      } else if (val === 'sora') {
        document.body.style.fontFamily = "'Sora', sans-serif";
      } else if (val === 'staatliches') {
        document.body.style.fontFamily = "'Staatliches', sans-serif";
      } else if (val === 'caveat') {
        document.body.style.fontFamily = "'Caveat', cursive";
      } else if (val === 'yeseva-one') {
        document.body.style.fontFamily = "'Yeseva One', serif";
      } else if (val === 'righteous') {
        document.body.style.fontFamily = "'Righteous', cursive";
      } else if (val === 'cormorant-garamond') {
        document.body.style.fontFamily = "'Cormorant Garamond', serif";
      }
      localStorage.setItem('font-family', val);
    });

  document.querySelectorAll('#topMenu input[type="color"]').forEach(input => {
    input.addEventListener('input', function() {
      const varName = this.id;
      const color = this.value;
      document.documentElement.style.setProperty(`--${varName}`, color);
      localStorage.setItem(varName, color);
    });
  });

  document.querySelectorAll('#topMenu input[type="color"]').forEach(input => {
    const saved = localStorage.getItem(input.id);
    if (saved) {
      input.value = saved;
      document.documentElement.style.setProperty(`--${input.id}`, saved);
    }
  });

    const savedFont = localStorage.getItem('font-family');
    if (savedFont) {
      document.getElementById('fontSelector').value = savedFont;
      // Aplica la fuente guardada
      if (savedFont === 'arial') {
        document.body.style.fontFamily = 'Arial, sans-serif';
      } else if (savedFont === 'oswald') {
        document.body.style.fontFamily = "'Oswald', Arial, sans-serif";
      } else if (savedFont === 'roboto-slab') {
        document.body.style.fontFamily = "'Roboto Slab', serif";
      } else if (savedFont === 'pacifico') {
        document.body.style.fontFamily = "'Pacifico', cursive";
      } else if (savedFont === 'lato') {
        document.body.style.fontFamily = "'Lato', Arial, sans-serif";
      } else if (savedFont === 'merriweather') {
        document.body.style.fontFamily = "'Merriweather', serif";
      } else if (savedFont === 'montserrat') {
        document.body.style.fontFamily = "'Montserrat', Arial, sans-serif";
      } else if (savedFont === 'indie-flower') {
        document.body.style.fontFamily = "'Indie Flower', cursive";
      } else if (savedFont === 'playfair') {
        document.body.style.fontFamily = "'Playfair Display', serif";
      } else if (savedFont === 'source-code') {
        document.body.style.fontFamily = "'Source Code Pro', monospace";
      }
    }
  const fontSizeInput = document.getElementById('font-size-range');
  fontSizeInput.value = localStorage.getItem('menu-font-size') || '1';
  document.documentElement.style.setProperty('--menu-font-size', fontSizeInput.value + 'rem');
  fontSizeInput.addEventListener('input', function() {
    document.documentElement.style.setProperty('--menu-font-size', this.value + 'rem');
    localStorage.setItem('menu-font-size', this.value);
  });
    const savedFontSize = localStorage.getItem('menu-font-size');
    if (savedFontSize) {
      fontSizeInput.value = savedFontSize;
      document.documentElement.style.setProperty('--menu-font-size', savedFontSize + 'rem');
    }

    const bgOpacityInput = document.getElementById('bg-opacity');
    bgOpacityInput.value = localStorage.getItem('bg-opacity') || '0.2';
    document.documentElement.style.setProperty('--bg-opacity', bgOpacityInput.value);

    bgOpacityInput.addEventListener('input', function() {
      document.documentElement.style.setProperty('--bg-opacity', this.value);
      localStorage.setItem('bg-opacity', this.value);
    });
    const savedBgOpacity = localStorage.getItem('bg-opacity');
    if (savedBgOpacity) {
      bgOpacityInput.value = savedBgOpacity;
      document.documentElement.style.setProperty('--bg-opacity', savedBgOpacity);
    }

    const firuleteSelector = document.getElementById("firuleteSelector");
    firuleteSelector.addEventListener("change", function () {
      const val = this.value;
      document.documentElement.style.setProperty("--firulete", `"${val}"`);
      localStorage.setItem("firulete", val);
    });

    const savedFirulete = localStorage.getItem("firulete");
    if (savedFirulete) {
      firuleteSelector.value = savedFirulete;
      document.documentElement.style.setProperty("--firulete", `"${savedFirulete}"`);
    }

    const sameColorToggle = document.getElementById("sameColorMode");
    const colorMenu = document.getElementById("colorMenu");
    const colorGroups = document.querySelectorAll(".color-group");
    const colorPickers = document.querySelectorAll('#colorMenu input[type="color"]');

    sameColorToggle.addEventListener("change", () => {
      const active = sameColorToggle.checked;

      if (active) {
        colorMenu.classList.add("active");
      } else {
        colorMenu.classList.remove("active");
      }

      colorGroups.forEach(cb => (cb.checked = false));
    });

    colorPickers.forEach(picker => {
      picker.addEventListener("input", () => {
        const selectedCheckboxes = Array.from(colorGroups).filter(cb => cb.checked);
        const newColor = picker.value;
        const varName = picker.id;

        document.documentElement.style.setProperty(`--${varName}`, newColor);
        localStorage.setItem(varName, newColor);

        if (sameColorToggle.checked && selectedCheckboxes.length > 1) {
          selectedCheckboxes.forEach(cb => {
            const input = cb.nextElementSibling;
            input.value = newColor;
            const name = input.id;
            document.documentElement.style.setProperty(`--${name}`, newColor);
            localStorage.setItem(name, newColor);
          });
        }
      });
    });

    const masterColorContainer = document.getElementById("masterColorContainer");
    const masterColorInput = document.getElementById("masterColor");

    sameColorToggle.addEventListener("change", () => {
      masterColorContainer.style.display = sameColorToggle.checked ? "flex" : "none";
    });

    masterColorInput.addEventListener("input", () => {
      if (!sameColorToggle.checked) return;

      const newColor = masterColorInput.value;
      const selectedCheckboxes = Array.from(document.querySelectorAll("#colorMenu .color-group")).filter(cb => cb.checked);

      selectedCheckboxes.forEach(cb => {
        const input = cb.nextElementSibling;
        input.value = newColor;
        const varName = input.id;
        document.documentElement.style.setProperty(`--${varName}`, newColor);
        localStorage.setItem(varName, newColor);
      });
    });

    const presets = {
      1: {
        font: 'cormorant-garamond',
        size: '1.0',
        colors: {
          'color-nombre-resto': '#4b2e05',
          'color-nombre-slogan': '#8b5e34',
          'color-categoria': '#4b2e05',
          'color-subcategoria': '#6e4429',
          'color-plato': '#2b1a10',
          'color-descripcion': '#7a6241',
          'color-precio': '#4b2e05',
          'color-info-resto': '#4b2e05',
          'color-bg': '#fff7ec',
          'color-firulete': '#b28554'
        },
        firulete: '‚öú ‚öú ‚öú',
        bgOpacity: '0.2'
      },
      2: { 
        font: 'lato',
        size: '1',
        colors: {
          'color-nombre-resto': '#466c3f',
          'color-nombre-slogan': '#6d9964',
          'color-categoria': '#466c3f',
          'color-subcategoria': '#688c55',
          'color-plato': '#3a5037',
          'color-descripcion': '#6f8d6a',
          'color-precio': '#55784b',
          'color-info-resto': '#466c3f',
          'color-bg': '#f5f9f5',
          'color-firulete': '#55784b'
        },
        firulete: 'üçÉ ‚úø üçÉ',
        bgOpacity: '0.15'
      },
      3: {
        font: 'montserrat',
        size: '1',
        colors: {
          'color-nombre-resto': '#ffffff',
          'color-nombre-slogan': '#cccccc',
          'color-categoria': '#ffffff',
          'color-subcategoria': '#cccccc',
          'color-plato': '#ffffff',
          'color-descripcion': '#aaaaaa',
          'color-precio': '#ff6464',
          'color-info-resto': '#dddddd',
          'color-bg': '#121212',
          'color-firulete': '#888888'
        },
        firulete: '‚ãÑ ‚ãÑ ‚ãÑ',
        bgOpacity: '0.3'
      },
      4: { 
        font: 'playfair',
        size: '1.1',
        colors: {
          'color-nombre-resto': '#c9a44c',
          'color-nombre-slogan': '#b8974a',
          'color-categoria': '#b8974a',
          'color-subcategoria': '#d4b76d',
          'color-plato': '#222',
          'color-descripcion': '#666',
          'color-precio': '#b8974a',
          'color-info-resto': '#444',
          'color-bg': '#fdfaf3',
          'color-firulete': '#b8974a'
        },
        firulete: '‚ú§ ‚ú§ ‚ú§',
        bgOpacity: '0.18'
      },
      5: { 
        font: 'merriweather',
        size: '1',
        colors: {
          'color-nombre-resto': '#8c1d1d',
          'color-nombre-slogan': '#bf4040',
          'color-categoria': '#8c1d1d',
          'color-subcategoria': '#bf4040',
          'color-plato': '#2e2e2e',
          'color-descripcion': '#5a5a5a',
          'color-precio': '#8c1d1d',
          'color-info-resto': '#5a5a5a',
          'color-bg': '#fff9f9',
          'color-firulete': '#a64242'
        },
        firulete: '‚ùß ‚ùß ‚ùß',
        bgOpacity: '0.2'
      },
      6: {
        font: 'sora',
        size: '1',
        colors: {
          'color-nombre-resto': '#004E89',
          'color-nombre-slogan': '#2F80ED',
          'color-categoria': '#004E89',
          'color-subcategoria': '#0077B6',
          'color-plato': '#333',
          'color-descripcion': '#555',
          'color-precio': '#0077B6',
          'color-info-resto': '#004E89',
          'color-bg': '#EAF6FF',
          'color-firulete': '#0077B6'
        },
        firulete: '‚ú¶ ‚ú¶ ‚ú¶',
        bgOpacity: '0.12'
      },
      7: {
        font: 'yeseva-one',
        size: '1',
        colors: {
          'color-nombre-resto': '#b05b2b',
          'color-nombre-slogan': '#d4844c',
          'color-categoria': '#b05b2b',
          'color-subcategoria': '#d4844c',
          'color-plato': '#3c2b1f',
          'color-descripcion': '#6b4b36',
          'color-precio': '#b05b2b',
          'color-info-resto': '#5a4333',
          'color-bg': '#fff8f2',
          'color-firulete': '#b05b2b'
        },
        firulete: '‚ú§ ‚ú§ ‚ú§',
        bgOpacity: '0.18'
      },
      8: { 
        font: 'unbounded',
        size: '1',
        colors: {
          'color-nombre-resto': '#00C6CF',
          'color-nombre-slogan': '#00F0FF',
          'color-categoria': '#00C6CF',
          'color-subcategoria': '#00E5FF',
          'color-plato': '#E0E0E0',
          'color-descripcion': '#B0B0B0',
          'color-precio': '#00E5FF',
          'color-info-resto': '#FFFFFF',
          'color-bg': '#0A0A0A',
          'color-firulete': '#00E5FF'
        },
        firulete: '‚ö° ‚ö° ‚ö°',
        bgOpacity: '0.25'
      },
      9: { 
        font: 'righteous',
        size: '1',
        colors: {
          'color-nombre-resto': '#F94144',
          'color-nombre-slogan': '#F8961E',
          'color-categoria': '#F3722C',
          'color-subcategoria': '#F9C74F',
          'color-plato': '#277DA1',
          'color-descripcion': '#577590',
          'color-precio': '#F94144',
          'color-info-resto': '#F9844A',
          'color-bg': '#FFF8F0',
          'color-firulete': '#F3722C'
        },
        firulete: '‚ú® üí´ ‚ú®',
        bgOpacity: '0.15'
      },
      10: { 
        font: 'lato',
        size: '1',
        colors: {
          'color-nombre-resto': '#222',
          'color-nombre-slogan': '#555',
          'color-categoria': '#333',
          'color-subcategoria': '#555',
          'color-plato': '#222',
          'color-descripcion': '#777',
          'color-precio': '#000',
          'color-info-resto': '#333',
          'color-bg': '#ffffff',
          'color-firulete': '#aaa'
        },
        firulete: '‚ãÑ ‚ãÑ ‚ãÑ',
        bgOpacity: '0.1'
      }
    };

    document.getElementById('presetSelector').addEventListener('change', function() {
      const val = this.value;
      if (!val || !presets[val]) return;
      const preset = presets[val];

      document.getElementById('fontSelector').value = preset.font;
      document.body.style.fontFamily = `'${preset.font}', sans-serif`;
      localStorage.setItem('font-family', preset.font);

      document.documentElement.style.setProperty('--menu-font-size', preset.size + 'rem');
      localStorage.setItem('menu-font-size', preset.size);

      for (const [key, color] of Object.entries(preset.colors)) {
        document.documentElement.style.setProperty(`--${key}`, color);
        localStorage.setItem(key, color);
        const input = document.getElementById(key);
        if (input) input.value = color;
      }

      document.documentElement.style.setProperty('--firulete', `"${preset.firulete}"`);
      localStorage.setItem('firulete', preset.firulete);
      document.getElementById('firuleteSelector').value = preset.firulete;

      document.documentElement.style.setProperty('--bg-opacity', preset.bgOpacity);
      localStorage.setItem('bg-opacity', preset.bgOpacity);
      document.getElementById('bg-opacity').value = preset.bgOpacity;
    });

</script>
</body>
</html>
